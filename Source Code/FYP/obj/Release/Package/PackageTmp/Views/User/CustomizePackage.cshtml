@model FYP.Models.CustomPackageModel
@{
    ViewBag.Title = "CustomizePackage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<link href="~/Content/userassests/css/BookingStyle.css" rel="stylesheet" />
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.min.css'>
<div class="formdiv">
    <h1>Booking Process </h1>
    <div id="multi-step-form-container">
        <!-- Form Steps / Progress Bar -->
        <ul class="form-stepper form-stepper-horizontal text-center mx-auto pl-0">
            <!-- Step 1 -->
            <li class="form-stepper-active text-center form-stepper-list" step="1">
                <a class="mx-2">
                    <span class="form-stepper-circle">
                        <span>1</span>
                    </span>
                    <div class="label">Personal Details</div>
                </a>
            </li>
            <!-- Step 2 -->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="2">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>2</span>
                    </span>
                    <div class="label text-muted">Select City</div>
                </a>
            </li>
            <!-- Step 3 -->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="3">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>3</span>
                    </span>
                    <div class="label text-muted">Select Hotel</div>
                </a>
            </li>
            <!-- Step 4 -->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="4">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>4</span>
                    </span>
                    <div class="label text-muted">Select Tour Guider</div>
                </a>
            </li>
            <!-- Step 4 -->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="5">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>5</span>
                    </span>
                    <div class="label text-muted">Select Vehicle</div>
                </a>
            </li>
            <!-- Step 5-->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="6">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>6</span>
                    </span>
                    <div class="label text-muted">Billing</div>
                </a>
            </li>
            <!-- Step 7 -->
            <li class="form-stepper-unfinished text-center form-stepper-list" step="7">
                <a class="mx-2">
                    <span class="form-stepper-circle text-muted">
                        <span>7</span>
                    </span>
                    <div class="label text-muted">Summary</div>
                </a>
            </li>
        </ul>
        <!-- Step Wise Form Content -->
        <div id="userAccountSetupForm" name="userAccountSetupForm">
            <!-- Step 1 Content -->
            <section id="step-1" class="form-step">
                <h2 class="font-normal">Personal Details</h2>
                <!-- Step 1 input fields -->
                <div class="mt-3">
                    <div class="form-group row">
                        <div class="col">
                            <label class="col-sm col-form-label">Full Name</label>
                            <div class="col-sm">
                                <input class="form-control" value="@Model.Name" id="Name" placeholder="Name" type="text" />
                            </div>
                        </div>
                        <div class="col">
                            <label class="col-sm col-form-label">Contact Number #</label>
                            <div class="col-sm-7">
                                <input class="form-control" id="ContactNumber" value="@Model.Contact_No" placeholder="Contact Number" type="number" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col">
                            <label class="col-sm col-form-label">CNIC #</label>
                            <div class="col-sm">
                                <input class="form-control" value="@Model.CNIC" id="CNIC" placeholder="CNIC" type="text" />
                            </div>
                        </div>
                        <div class="col">
                            <label class="col-sm col-form-label">Date of Birth</label>
                            <div class="col-sm-7">
                                @*<input class="form-control" id="DOB" type="date" value="" />*@
                                @Html.TextBoxFor(x => x.DOB, "{0:yyyy-MM-dd}", new { @type = "date", @class = "form-control" })
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col">
                            <label class="col-sm-2 col-form-label">Email</label>
                            <div class="col-sm-4">
                                <input class="form-control" id="Email" value="@Model.Email" type="email" placeholder="Enter Email" style="text-transform:lowercase" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col">
                            <label class="col-sm-2 col-form-label">Address</label>
                            <div class="col-sm-7">
                                <input class="form-control" id="Address" value="@Model.Address" type="text" placeholder="Enter Complete Address" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col">
                            <label class="col-sm col-form-label">State</label>
                            <div class="col-sm">
                                <input class="form-control" id="State" value="@Model.State" placeholder="State" type="text" />
                            </div>
                        </div>
                        <div class="col">
                            <label class="col-sm-2 col-form-label">City</label>
                            <div class="col-sm-7">
                                <input class="form-control" id="city" placeholder="City" value="@Model.U_City" type="text" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="col">
                        <button class="button btn-navigate-form-step" type="button" step_number="2" @*onclick="validation()"*@>Next</button>
                    </div>
                </div>
            </section>
            <!-- Step 2 Content, default hidden on page load. -->
            <section id="step-2" class="form-step d-none">
                <h2 class="font-normal">Select City</h2>
                <!-- Step 2 input fields -->
                <div class="mt-3">
                    @*<label class="col-sm col-form-label">Name:</label><br />
                        <label class="col-sm col-form-label" id="packName"></label>
                        <label class="col-sm col-form-label">Price:</label><br />
                        <label class="col-sm col-form-label" id="packAmount"></label>*@
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label class="col-sm col-form-label">Cities</label>
                            <div class="col">
                                @Html.HiddenFor(x => x.Cities)
                                <select class="city form-control" id="multi-select" multiple onchange="getCities()"></select>
                            </div>
                        </div>
                        <div id="placeMainDiv" class="col-6">
                            <div class="d-none" id="placeDiv">
                                <label class="col-sm col-form-label">Places</label>
                                <div class="col-sm">
                                    @Html.HiddenFor(x => x.Places)
                                    <select class="place form-control" id="multi-select2" multiple onchange="getplaces()"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-4">
                            <label class="col-sm col-form-label">No of Tickets</label>
                            <div class="col-sm">
                                <input class="form-control" id="NoofTickets" value="@Model.People" placeholder="Enter No of Tickets" type="number" onkeyup="checkSeats(this)" required />
                                @*<span class="col-sm col-form-label text-danger" id="alertTicketText"></span>*@
                            </div>
                            @*<span class="col-sm col-form-label" id="availableSeats"></span><br />*@
                            @*<span class="col-sm col-form-label text-danger" id="alertText"></span>*@
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-4">
                            <label class="col-sm col-form-label">Trip Start Date</label>
                            <div class="col-sm">
                                <input class="form-control" type="date" id="StartDate" value="@Model.StartDate" min="9/8/2022" onchange="checkStartDate()" required>
                                @*<input class="form-control" id="startDate" value="@Model.StartDate" type="date" required />*@
                            </div>
                        </div>
                        <div class="col-4">
                            <label class="col-sm col-form-label">Trip End Date</label>
                            <div class="col-sm">
                                <input class="form-control" type="date" id="EndDate" value="@Model.EndDate">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <button class="buttonPrev btn-navigate-form-step" type="button" step_number="1">Prev</button>
                    <button class="button btn-navigate-form-step" type="button" step_number="3" id="packNextBtn" onclick="DEHotel()">Next</button>
                </div>
        </div>
        </section>
        <!-- Step 3 Content, default hidden on page load. -->
        <section id="step-3" class="form-step d-none">
            <h2 class="font-normal">Select Hotel</h2>
            <!-- Step 3 input fields -->
            <div class="mt-3" id="hotelDiv">
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label class="col-sm col-form-label">Hotels</label>
                        <div class="col">
                            @Html.HiddenFor(x => x.Hotels)
                            <select class="hotel form-control" id="multi-select3" multiple onchange="gethotels()"></select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <button class="buttonPrev btn-navigate-form-step" type="button" step_number="2">Prev</button>
                <button class="button btn-navigate-form-step" type="button" step_number="4" onclick="tourGuider()">Next</button>
            </div>
        </section>
        <!-- Step 4 Content, default hidden on page load. -->
        <section id="step-4" class="form-step d-none">
            <h2 class="font-normal">Select Tour Guider</h2>
            <!-- Step 4 input fields -->
            @Html.HiddenFor(x => x.Guider)
            <div class="mt-3"  style="height:300px; overflow-y:scroll; overflow-x:hidden;">
                <div class="row" id="guiders">
                    
                </div>
            </div>
            <div class="mt-3">
                <button class="buttonPrev btn-navigate-form-step" type="button" step_number="3">Prev</button>
                <button class="button btn-navigate-form-step" type="button" step_number="5" onclick="tourVehicle()">Next</button>
            </div>
        </section>
        <!-- Step 5 Content, default hidden on page load. -->
        <section id="step-5" class="form-step d-none">
            <h2 class="font-normal">Select Vehicle</h2>
            <!-- Step 5 input fields -->
            @Html.HiddenFor(x => x.Vehicle)
            <div class="mt-3" style="height:300px; overflow-y:scroll; overflow-x:hidden;">
                <div class="row" id="vehicles">

                </div>
            </div>
            <div class="mt-3">
                <button class="buttonPrev btn-navigate-form-step" type="button" step_number="4">Prev</button>
                <button class="button btn-navigate-form-step" type="button" step_number="6" @*onclick="validation()"*@>Next</button>
            </div>
        </section>
        <!-- Step 6 Content, default hidden on page load. -->
        <section id="step-6" class="form-step d-none">
            <h2 class="font-normal">Billing</h2>
            <!-- Step 6 input fields -->
            <div class="mt-3">
                <div class="form-group row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="username">
                                <h6>Cardholder's Name'</h6>
                            </label>
                            <input class="form-control" id="CardHolderName" placeholder="Card Holder Name" type="text" required />
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-6">
                        <label for="cardNumber">
                            <h6>Card Number</h6>
                        </label>
                        <div class="input-group">
                            <input class="form-control" id="CardNumber" placeholder="Card Number" type="number" required />                          <div class="input-group-append">
                                <span class="input-group-text text-muted">
                                    <i class="fab fa-cc-visa mx-1"></i>
                                    <i class="fab fa-cc-mastercard mx-1"></i>
                                    <i class="fab fa-cc-amex mx-1"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>
                                <span class="hidden-xs">
                                    <h6>Expiration Date</h6>
                                </span>
                            </label>
                            <div class="input-group">
                                <input class="form-control" id="month" placeholder="MM" type="number" required />
                                <input class="form-control" id="year" placeholder="YYYY" type="number" required />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group mb-4">
                            <label data-toggle="tooltip" title="Three digit CV code on the back of your card">
                                <h6>CVV <i class="fa fa-question-circle d-inline"></i></h6>
                            </label>
                            <input class="form-control" id="cvc" placeholder="CVV" type="number" required />
                        </div>
                    </div>
                </div>

            </div>
            <div class="mt-3">
                <button class="buttonPrev btn-navigate-form-step" type="button" step_number="5">Prev</button>
                <button class="button btn-navigate-form-step" type="button" step_number="7" onclick="summary()">Next</button>
            </div>
        </section>
        <!-- Step 7 Content, default hidden on page load. -->
        <section id="step-7" class="form-step d-none">
            <h2 class="font-normal">Summary</h2>
            <!-- Step 7 input fields -->
            <div class="mt-3">
                <h4 class="font-normal">Personal Details</h4>
                <div class="row">
                    <div class="col-6">
                        <label>Name:</label>
                        <span id="userName"></span><hr />
                        <label>Contact No#: </label>
                        <span id="userContact"></span><hr />
                        <label>Address:</label>
                        <span id="userAddress"></span><hr />
                        <label>State:</label>
                        <span id="userState"></span>
                    </div>
                    <div class="col-6">
                        <label>Date of Birth:</label>
                        <span id="userDOB"></span><hr />
                        <label>CNIC:</label>
                        <span id="userCNIC"></span><hr />
                        <label>City:</label>
                        <span id="userCity"></span>
                    </div>
                </div>
                <br />


                <h4 class="font-normal">Package Details</h4>
                <div class="row">

                    <div class="col-6">
                        <label>Package:</label>
                        <span id="packageName"></span><hr />
                        <label>Duration:</label>
                        <span id="duration"></span><hr />
                        <label>Trip Starting Date: </label>
                        <span id="date"></span>
                    </div>
                    <div class="col-6">
                        <label>Pick Up Location: </label>
                        <span id="pickUpLocation"></span><hr />
                        <label>Price:</label>
                        <span id="price"></span><hr />
                        <label>Total Tickets:</label>
                        <span id="ticket"></span>
                        @*<input id="hotelId"/>*@
                    </div>
                </div>
                <br />

                <h4 class="font-normal">Payment Details</h4>
                <div class="row">

                    <div class="col-6">
                        <label>Card Number:</label><br />
                        <label>Amount:</label><br />
                        <label>GST: </label><br />
                        <label>Discount: </label><br />
                        <label>Total: </label>
                    </div>
                    <div class="col-6">
                        <span id="cardNumber"></span><br />
                        <span id="amount"></span><br />
                        <span id="tax"></span><br />
                        <span id="discount">0%</span><br /><hr />
                        <span id="total" class="font-weight-bold"></span>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <div class="col">
                    <button class="buttonPrev btn-navigate-form-step" type="button" step_number="6">Prev</button>
                    <button class="button submit-btn" id="saveBtn" onclick="bookingSubmit()">Book Trip</button>
                </div>
            </div>
        </section>
    </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>
<script src="~/Scripts/jquery-3.6.0.js"></script>
<script src="~/Content/userassests/js/BookingScript.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css">
<script src="~/Content/adminassets/assets/js/jquery.min.js"></script>
<script src="~/Scripts/select2.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>

<script>

    var isPlace = false;
    var isHotel = false;
    var placeCount = 0;

    $(document).ready(function () {

        var now = new Date();
        var day = ("0" + now.getDate()).slice(-2);
        var month = ("0" + (now.getMonth() + 1)).slice(-2);
        var today = now.getFullYear() + "-" + (month) + "-" + (day);

        //$('#StartDate').val(today);
        $('#StartDate').attr('min', today);
        //$('#EndDate').val(today);


        $.get("@Url.Action("GetCities","User")", function (data) {

            var html = ''
            var cityDropdown = document.getElementById('multi-select')

            for (let city = 0; city < data.Cities.length; city++)
            {
                html += `<option value="${data.Cities[city].City_ID}">${data.Cities[city].City_Name}</option>`
            }
            cityDropdown.innerHTML = html;
            //console.log(cityDropdown)

            var Cities = new Choices('#multi-select', {
                removeItemButton: true,
                //maxItemCount: 5,
                //searchResultLimit: 5
                /*renderChoiceLimit: 5*/
            });
        });
        checkStartDate()
    });

    function checkStartDate() {
        var enddate = new Date($('#StartDate').val());
        var day1 = ("0" + enddate.getDate()).slice(-2);
        var month1 = ("0" + (enddate.getMonth() + 1)).slice(-2);
        var today1 = enddate.getFullYear() + "-" + (month1) + "-" + (day1);
        $('#EndDate').attr('min', today1);
    }

    function getCities() {
        var cititesArray = [];
        var cititesNameArray = [];

        $.each($("#multi-select option:selected"), function () {
            cititesArray.push($(this).val());
            cititesNameArray.push($(this).text());

        });

        var data = cititesArray.toString();
        $("#Cities").val(data)

        if (cititesArray.length > 0) {
            isPlace = true;
            $("#placeDiv").removeClass("d-none");
            DEPlace()
        } else {
            isPlace = false;
            $("#placeDiv").addClass("d-none");
        }
    }

    function getplaces() {
        var placesArray = [];

        $.each($("#multi-select2 option:selected"), function () {
            placesArray.push($(this).val());
        });
        var data = placesArray.toString();
        $("#Places").val(data)

    }

    function gethotels() {
        var hotelsArray = [];

        $.each($("#multi-select3 option:selected"), function () {
            hotelsArray.push($(this).val());
        });
        var data = hotelsArray.toString();
        $("#Hotels").val(data)

    }

    function DEPlace() {
        var cititesArray = [];

        $.each($("#multi-select option:selected"), function () {
            cititesArray.push($(this).val());
        });

            var data = cititesArray.toString();
            $("#Cities").val(data)
            $.get("/User/GetPlaces?data=" + data, function (data) {

                document.getElementById('placeDiv').remove()
                document.getElementById('placeMainDiv').innerHTML= ` <div id="placeDiv">
                            <label class="col-sm col-form-label">Places</label>
                            <div class="col-sm">
                                @Html.HiddenFor(x => x.Places)
                                <select class="place form-control" id="multi-select2" multiple onchange="getplaces()"></select>
                            </div>
                        </div>`

                document.getElementById("multi-select2").placeholder = "Select Place";

                new Choices('#multi-select2', {
                    allowHTML: true,
                    removeItemButton: true,
                    choices: data.Places
                });

            });

    }

    function DEHotel() {
        var cititesArray = [];

        $.each($("#multi-select option:selected"), function () {
            cititesArray.push($(this).val());
        });

            var data = cititesArray.toString();
            $("#Cities").val(data)

            $.get("/User/GetHotels?data=" + data, function (data) {
                console.log(data)
                var html = '<option class="disabled" value="0" disabled>Select Hotels According To City</option>'
                var hotelDropdown = document.getElementById('multi-select3')
                for (let hotel = 0; hotel < data.Hotels.length; hotel++) {
                    html += `<option value="${data.Hotels[hotel].Id}" title="City: ${data.Hotels[hotel].City}, Price: ${data.Hotels[hotel].Price}" data-toggle="popover" data-trigger="hover">${data.Hotels[hotel].Name}</option>`
                }
                hotelDropdown.innerHTML = html;
            });
    }

    function tourGuider() {
        ////var data = `"${@Model.City}"`;
        $.get("/User/GetTourGuider", function (data) {
            console.log(data)
            var html = ''
            var guidersDiv = document.getElementById('guiders')
            for (let guide = 0; guide < data.Guiders.length; guide++) {
                
                var url = data.Guiders[guide].Img.replace("~", "");
                

                html += `<div class="GuiderDiv col-3 my-3 py-3 text-center" onclick="selectGuider(this)">
                            <input id="guider${data.Guiders[guide].ID}" class="d-none" value="${data.Guiders[guide].ID}"/>
                            <img src="${url}" style="width:150px; height:150px; border:1px solid black; border-radius:50%;"/><br /><br />
                            <h6>${data.Guiders[guide].Name}(Age: ${data.Guiders[guide].Age} Years)</h6>
                            <span>${data.Guiders[guide].City}, ${data.Guiders[guide].State}</span>
                        </div>`
            }
            guidersDiv.innerHTML = html;
        });
    }

    function tourVehicle() {
        ////var data = `"${@Model.City}"`;
        $.get("/User/GetVehicle", function (data) {
            console.log(data)
            var html = ''
            debugger
            var vehiclesDiv = document.getElementById('vehicles')
            for (let vehicle = 0; vehicle < data.Vehicles.length; vehicle++) {
                let imgStr = data.Vehicles[vehicle].Vehicle_Pictures;
                var stringArray = imgStr.split(/(\s+)/);
                let img = stringArray[4];
                let img1 = stringArray[6];
                let img2 = stringArray[8];
                let img3 = stringArray[10];
                let result = img.replace("~", "");
                result = result.replace(",", "");
                let result1 = img1.replace("~", "");
                result1 = result1.replace(",", "");
                let result2 = img2.replace("~", "");
                result2 = result2.replace(",", "");
                let result3 = img3.replace("~", "");
                result3 = result3.replace(",", "");
                

                html += `<div class="VehicleDiv col-4 my-3 py-3 text-center" onclick="selectVehicle(this)">
                            <input id="vehicle${data.Vehicles[vehicle].Id}" class="d-none" value="${data.Vehicles[vehicle].Id}"/>
                            <div id="carouselExampleSlidesOnly" class="carousel slide mx-auto my-3" data-bs-ride="carousel" style="width:210px; border:1px solid black;">
                              <div class="carousel-inner">
                                <div class="carousel-item active">
                                  <img src="${result}" class="d-block w-100" alt="..." style="height:150px;">
                                </div>
                                <div class="carousel-item">
                                  <img src="${result1}" class="d-block w-100" alt="..." style="height:150px;">
                                </div>
                                <div class="carousel-item">
                                  <img src="${result2}" class="d-block w-100" alt="..." style="height:150px;">
                                </div>
                                <div class="carousel-item">
                                  <img src="${result3}" class="d-block w-100" alt="..." style="height:150px;">
                                 </div>
  </div>
</div>
                            <h6>${data.Vehicles[vehicle].Vehicle_Company}(${data.Vehicles[vehicle].Vehicle_Model}, ${data.Vehicles[vehicle].Vehicle_Model_Year})</h6>
                            <span>${data.Vehicles[vehicle].Vehicle_Type}</span><br/>
                            <span>Rs ${data.Vehicles[vehicle].Rent} per day</span>
                        </div>`
            }
            vehiclesDiv.innerHTML = html;
        });
    }
    
    function selectGuider(data) {
        var id = data.firstElementChild.value
        $("#Guider").val(id)   

        $(".GuiderDiv").removeClass("selected");
        $(data).addClass("selected");
    }

    function selectVehicle(data) {
        var id = data.firstElementChild.value
        $("#Vehicle").val(id)   

        $(".VehicleDiv").removeClass("selected");
        $(data).addClass("selected");
    }

    //function highlightGuider(data) {
    //        debugger
            
    //}

        @*price = data.Package.Price;
        //Summary
        $("#userName").text(data.User.Name);
        $("#userCNIC").text(data.User.CNIC);
        $("#userContact").text(data.User.Contact_Number);
        $("#userAddress").text(data.User.Address);
        $("#userState").text(data.User.State);
        $("#userCity").text(data.User.City);
        $("#userDOB").text(formattedDate1);
        $("#packageName").text(data.Package.Name);
        $("#pickUpLocation").text(data.Package.Pick_Up_Location);
        $("#duration").text(data.Package.No_of_Days + " Days");
        $("#price").text("Rs " + numberWithCommas(data.Package.Price));
        $("#date").text(formattedDate2);
        //$("#hotel").text(json.Summary.Hotels);


    function summary() {
        validation()
        var tickets = $('#NoofTickets').val();
        var amount = tickets * price;
        var tax = amount * 0.02;
        var total = amount + tax;
        var cardNumber = $('#CardNumber').val();
        cardNumber = cardNumber.toString().substr(-4);
        $("#ticket").text(tickets);
        $("#cardNumber").text("****" + cardNumber);
        $("#amount").text("Rs " + numberWithCommas(amount));
        $("#tax").text("Rs " + numberWithCommas(tax));
        $("#total").text("RS " + numberWithCommas(String(total)));
    }

    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function validation(){
        var name = $('#Name').val
        var contact = $('#ContactNumber').val
        var dob = $('#DOB').val
        var email = $('#Email').val
        var address = $('#Address').val
        var state = $('#State').val
        var city = $('#city').val
        var tickets = $('#NoofTickets').val
        var holderName = $('#CardHolderName').val
        var cardNumber = $('#CardNumber').val
        var month = $('#month').val
        var year = $('#year').val
        var cvc = $('#cvc').val

        if (name != null || name != "") {

        }
    }

    function checkSeats(data) {
        debugger
        var boxVal = data.value
        if (boxVal > availabeSeats) {
            $('#packNextBtn').prop('disabled', true)
            $('#alertText').text("Not Available")
            document.getElementById('packNextBtn').style.cursor = "not-allowed"
        } else if (boxVal == 0 || boxVal == null) {
            $('#packNextBtn').prop('disabled', true)
            $('#alertTicketText').text("Enter Number of Tickets")
            document.getElementById('packNextBtn').style.cursor = "not-allowed"
        }
        else {
            $('#packNextBtn').prop('disabled', false)
            $('#alertText').text("")
            document.getElementById('packNextBtn').style.cursor = "pointer"
        }
    }

    function bookingSubmit() {
        debugger
        var idsHotel = hotelids.toString();
        var name = $('#Name').val();
        var email = $('#Email').val();
        var phone = $('#ContactNumber').val();
        var cnic = $('#CNIC').val();
        var dob = $('#DOB').val();
        var Address = $('#Address').val();
        var State = $('#State').val();
        var City = $('#city').val();
        var hotelId = idsHotel;
        var holderName = $('#CardHolderName').val();
        var cardNo = $('#CardNumber').val();
        var month = $('#month').val();
        var year = $('#year').val();
        var cvc = $('#cvc').val();
        var nooftickets= $('#NoofTickets').val();
        var amount = $('#packAmount').text();

        var bookingModel = {
            id: userID,
            name: name,
            email: email,
            contact_number: phone,
            cnic: cnic,
            dob: dob,
            address: Address,
            state: State,
            city: City,
            packageid: packID,
            hotelid: hotelId,
            cardholdername: holderName,
            cardnumber: cardNo,
            month: month,
            year: year,
            cvc: cvc,
            amount: amount,
            no_of_tickets: nooftickets,
        }
        $("#saveBtn").disabled = true;
        document.getElementById("saveBtn").innerHTML = `Booking....`
        const requestOptions = {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(bookingModel)
        };
        fetch('/User/Booking', requestOptions)
            .then(response => response.json())
            .then(json => {
                document.getElementById("saveBtn").innerHTML = `Book Trip`
                if (json) {
                    Swal.fire({
                        title: 'Do you want to save the changes?',
                        icon: 'success',
                        showDenyButton: false,
                        showCancelButton: false,
                        confirmButtonText: 'Ok',
                    }).then((result) => {
                        /* Read more about isConfirmed, isDenied below */
                        if (result.isConfirmed) {
                            $("#saveBtn").disabled = false;
                            location.replace("@Url.Action("Home","User")")
                        }
                    })
                }
                else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Something went wrong!',
                    })
                }
            })
    }*@
</script>
